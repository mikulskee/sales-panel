(this["webpackJsonpsales-panel"]=this["webpackJsonpsales-panel"]||[]).push([[0],{137:function(e,t,a){e.exports=a(153)},142:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(12),i=a.n(r),c=(a(142),a(56)),o=a(16),s=a(87),u=a.n(s);a(145),a(146);u.a.initializeApp({apiKey:"AIzaSyBE_yMVi09qe0Nksxx3B-Cok-1XQhknp3M",authDomain:"salespanel-1bd4a.firebaseapp.com",databaseURL:"https://salespanel-1bd4a.firebaseio.com",projectId:"salespanel-1bd4a",storageBucket:"salespanel-1bd4a.appspot.com",messagingSenderId:"717768548602",appId:"1:717768548602:web:f6e09b7db3f0c09c682943"});var m=u.a,p=a(50),f=a(21),b=a(6),d=a(154),g=a(59),E=a(186),y=a(187),h=a(188),O=a(214),j=a(215),x=a(189),S=a(156),v=a(190),C=a(208),w=a(103),k=a.n(w),D=a(104),M=a.n(D),T=Object(o.g)((function(e){var t=Object(n.useState)({password:"",login:"",showPassowrd:!1}),a=Object(b.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(!1),o=Object(b.a)(c,2),s=o[0],u=o[1],w=Object(n.useState)(null),D=Object(b.a)(w,2),T=D[0],Y=D[1],V=function(e){return function(t){i(Object(f.a)(Object(f.a)({},r),{},Object(p.a)({},e,t.target.value)))}};return l.a.createElement(d.a,{style:{width:"400px",height:"320px",margin:"60px auto 0",padding:"40px"}},l.a.createElement(g.a,{variant:"h6",gutterBottom:!0,style:{textAlign:"center"}},"Logowanie"),l.a.createElement(E.a,{container:!0,justify:"center",alignItems:"center"},s?l.a.createElement(y.a,null):l.a.createElement("form",{onSubmit:function(){console.log(r)}},l.a.createElement(E.a,{container:!0,spacing:2,direction:"column"},l.a.createElement(E.a,{item:!0,style:{display:"flex",justifyContent:"center"}},l.a.createElement(h.a,{variant:"outlined"},l.a.createElement(O.a,{htmlFor:"outlined"},"Login"),l.a.createElement(j.a,{id:"outlined",label:"Login",variant:"outlined",value:r.login,onChange:V("login"),style:{margin:"0 auto",width:"240px"}}))),l.a.createElement(E.a,{item:!0,style:{display:"flex",justifyContent:"center"}},l.a.createElement(h.a,{variant:"outlined"},l.a.createElement(O.a,{htmlFor:"outlined-adornment-password"},"Has\u0142o"),l.a.createElement(j.a,{id:"outlined-adornment-password",type:r.showPassword?"text":"password",onChange:V("password"),value:r.password,endAdornment:l.a.createElement(x.a,{position:"end"},l.a.createElement(S.a,{"aria-label":"toggle password visibility",onClick:function(){i(Object(f.a)(Object(f.a)({},r),{},{showPassword:!r.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end"},r.showPassword?l.a.createElement(k.a,null):l.a.createElement(M.a,null))),labelWidth:70}))),l.a.createElement(v.a,{variant:"contained",color:"primary",style:{width:"150px",margin:"20px auto 0"},onClick:function(){u(!0),m.auth().signInWithEmailAndPassword(r.login,r.password).then((function(e){u(!1)})).catch((function(e){u(!1),i(Object(f.a)(Object(f.a)({},r),{},{password:"",login:""})),"The password is invalid or the user does not have a password."===e.message&&(Y("Podane has\u0142o jest nieprawid\u0142owe."),u(!1)),"There is no user record corresponding to this identifier. The user may have been deleted."===e.message&&(Y("Brak u\u017cytkownika o podanym mailu w bazie danych."),u(!1),i(Object(f.a)(Object(f.a)({},r),{},{password:"",login:""})))})),i(Object(f.a)(Object(f.a)({},r),{},{password:"",login:""}))}},"Zaloguj si\u0119"),T?l.a.createElement(C.a,{severity:"error"},T):null))))})),Y=Object(n.createContext)(),V=function(e){var t=Object(n.useState)(),a=Object(b.a)(t,2),r=a[0],i=a[1];return l.a.createElement(Y.Provider,{value:{companyState:r,setCompanyState:i}},e.children)},z=Object(n.createContext)(),U=function(e){var t=Object(n.useState)(),a=Object(b.a)(t,2),r=a[0],i=a[1];return l.a.createElement(z.Provider,{value:{users:r,setUsers:i}},e.children)},F=Object(n.createContext)(),A=function(e){var t=Object(n.useState)(),a=Object(b.a)(t,2),r=a[0],i=a[1];return l.a.createElement(F.Provider,{value:{personalData:r,setPersonalData:i}},e.children)},I=Object(o.g)((function(e){var t=Object(n.useContext)(F).setPersonalData,a=Object(n.useContext)(z),r=a.users,i=a.setUsers,c=Object(n.useContext)(Y).setCompanyState;return Object(n.useEffect)((function(){r&&e.history.push("/dashboard")})),Object(n.useEffect)((function(){var e=document.querySelector(".loginRef"),a=document.querySelector(".loader");m.auth().onAuthStateChanged((function(n){n?(m.firestore().collection("users").onSnapshot((function(e){i(e.docs.map((function(e){return e.data()})))})),m.firestore().collection("personal-data").doc("".concat(n.uid)).onSnapshot((function(e){return t(e.data())})),m.firestore().collection("company-state-general").onSnapshot((function(e){c(e.docs.map((function(e){return e.data()})))})),e.style.display="none"):(e.style.display="block",a.style.display="none",t(n),i(n))}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{container:!0,justify:"center",alignItems:"center",style:{marginTop:"40px"}},l.a.createElement(E.a,{item:!0},l.a.createElement(y.a,{className:"loader",style:{width:"80px",height:"80px"}})),l.a.createElement(E.a,{className:"loginRef",item:!0,style:{display:"none"}},l.a.createElement(T,null))))})),P=a(19),B=a(20);function L(){var e=Object(P.a)(["\n  font-family: 'Squada One', cursive;\n  color: #099be2;\n  span {\n    color: #086d9e;\n    font-family: 'Squada One', cursive;\n  }\n"]);return L=function(){return e},e}var Z=B.a.h1(L()),N=a(216);function G(){var e=Object(P.a)(["\n  background-color: #9afff9;\n"]);return G=function(){return e},e}var W=B.a.header(G()),K=Object(o.g)((function(e){var t,a=Object(n.useContext)(F).personalData,r=Object(n.useContext)(z).users;return l.a.createElement(W,null,l.a.createElement(E.a,{container:!0,style:{padding:"20px"},justify:"space-between"},l.a.createElement(E.a,{item:!0,style:{display:"flex",alignItems:"center"}},l.a.createElement(Z,null,l.a.createElement("span",null,"Sales")," Panel")),l.a.createElement(E.a,{item:!0},l.a.createElement(E.a,{container:!0,spacing:2},l.a.createElement(E.a,{item:!0},a?l.a.createElement(N.a,{style:{color:"black",backgroundColor:"".concat((t=a.initials,a?"AK"===t?r.filter((function(e){return"Q"===e.initials}))[0].color:r.filter((function(e){return e.initials===t}))[0].color:void 0)),width:"60px",height:"60px"},src:r.filter((function(e){return e.initials===a.initials})).length>0?r.filter((function(e){return e.initials===a.initials}))[0].img:null},r.filter((function(e){return e.initials===a.initials})).length>0?null:a.initials):a),l.a.createElement(E.a,{item:!0,style:{display:"flex",alignItems:"center"}},a?l.a.createElement(g.a,{variant:"h6"},a.name):a),l.a.createElement(E.a,{item:!0,style:{display:"flex",alignItems:"center"}},a?l.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(t){t.preventDefault(),e.history.push("/"),m.auth().signOut()}},"Wyloguj"):a)))))})),H=a(13),R=a.n(H),q=(a(70),a(158)),J=a(199),Q=a(200),X=a(206),$=a(201),_=a(217),ee=a(202),te=a(192),ae=a(197),ne=a(108),le=a.n(ne),re=a(109),ie=a.n(re),ce=a(66),oe=a.n(ce),se=a(65),ue=a.n(se),me=Object(n.createContext)(),pe=function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(!1),o=Object(b.a)(c,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(b.a)(m,2),g=d[0],E=d[1],y=Object(n.useState)("true"),h=Object(b.a)(y,2),O=h[0],j=h[1],x=Object(n.useState)("true"),S=Object(b.a)(x,2),v=S[0],C=S[1],w=Object(n.useState)("true"),k=Object(b.a)(w,2),D=k[0],M=k[1],T=Object(n.useState)({KK:"false",EH:"false",VF:"false"}),Y=Object(b.a)(T,2),V=Y[0],z=Y[1];Object(n.useEffect)((function(){localStorage.getItem("usersStateVisible")?z(JSON.parse(localStorage.getItem("usersStateVisible"))):localStorage.setItem("usersStateVisible",JSON.stringify(V))}),[]);Object(n.useEffect)((function(){localStorage.getItem("personalStateVisible")?j(localStorage.getItem("personalStateVisible")):localStorage.setItem("personalStateVisible","".concat(O))}),[]);Object(n.useEffect)((function(){localStorage.getItem("companyGeneralStateVisible")?C(localStorage.getItem("companyGeneralStateVisible")):localStorage.setItem("companyGeneralStateVisible","".concat(v))}),[]);Object(n.useEffect)((function(){localStorage.getItem("companyMonthlyStateVisible")?M(localStorage.getItem("companyMonthlyStateVisible")):localStorage.setItem("companyMonthlyStateVisible","".concat(D))}),[]);return l.a.createElement(me.Provider,{value:{successSnackbarOpen:s,setSuccessSnackbarOpen:u,failSnackbarOpen:g,setFailSnackbarOpen:E,personalStateVisible:O,changePersonalStateVisible:function(e){j(e),localStorage.setItem("personalStateVisible",e)},companyGeneralStateVisible:v,changeCompanyGeneralStateVisible:function(e){C(e),localStorage.setItem("companyGeneralStateVisible",e)},successDeleteSnackbarOpen:r,setSuccessDeleteSnackbarOpen:i,companyMonthlyStateVisible:D,changeCompanyMonthlyStateVisible:function(e){M(e),localStorage.setItem("companyMonthlyStateVisible",e)},usersStateVisible:V,changeUsersStateVisible:function(e,t){console.log(Object(f.a)(Object(f.a)({},V),{},Object(p.a)({},t,e))),z(Object(f.a)(Object(f.a)({},V),{},Object(p.a)({},t,e))),localStorage.setItem("usersStateVisible",JSON.stringify(Object(f.a)(Object(f.a)({},V),{},Object(p.a)({},t,e))))}}},e.children)},fe=a(212);function be(){var e=Object(P.a)(["\n  &.MuiButton-contained {\n    background-color: #ff0000 !important;\n    color: white;\n  }\n"]);return be=function(){return e},e}function de(){var e=Object(P.a)(["\n  &.MuiButton-outlined {\n    border-color: #616161 !important;\n    color: white;\n  }\n"]);return de=function(){return e},e}function ge(){var e=Object(P.a)(["\n  & .MuiPaper-root {\n    background-color: #383838;\n  }\n"]);return ge=function(){return e},e}var Ee=Object(B.a)(fe.a)(ge()),ye=Object(B.a)(v.a)(de()),he=Object(B.a)(v.a)(be()),Oe=function(e){var t=e.deleteConfirmationDialogVisible,a=e.setDeleteConfirmationDialogVisible,n=e.handleDeleteData,r=e.itemToDelete,i=function(){a(!1)};return l.a.createElement(Ee,{onClose:i,"aria-labelledby":"simple-dialog-title",open:t},l.a.createElement(E.a,{item:!0,style:{backgroundColor:"#383838",color:"white",padding:"30px"}},l.a.createElement(g.a,{variant:"h5",gutterBottom:!0},"Czy na pewno chcesz usun\u0105\u0107 wybrane zlecenie?"),l.a.createElement(g.a,null,"Tej czynno\u015b\u0107 nie b\u0119dzie mo\u017cna cofn\u0105\u0107."),l.a.createElement(E.a,{container:!0,justify:"space-between",style:{marginTop:"40px"}},l.a.createElement(ye,{variant:"outlined",onClick:i},"Anuluj"),l.a.createElement(he,{variant:"contained",onClick:n(r)},"Usu\u0144"))))},je=a(79),xe=a(210),Se=a(193),ve=a(209),Ce=a(211),we=a(207),ke=a(198),De=a(218),Me=a(24),Te=a(204);function Ye(){var e=Object(P.a)(["\n  background-color: #5f5f5f !important;\n  width: 100%;\n"]);return Ye=function(){return e},e}function Ve(){var e=Object(P.a)(["\n  width: 100%;\n  color: red !important;\n  text-align: center;\n"]);return Ve=function(){return e},e}function ze(){var e=Object(P.a)(["\n  span {\n    color: black !important;\n  }\n"]);return ze=function(){return e},e}function Ue(){var e=Object(P.a)(["\n  & * {\n    color: white !important;\n  }\n"]);return Ue=function(){return e},e}var Fe=B.a.form(Ue()),Ae=Object(B.a)(_.a)(ze()),Ie=Object(B.a)(g.a)(Ve()),Pe=Object(B.a)(te.a)(Ye()),Be=function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(!1),o=Object(b.a)(c,2),s=o[0],u=o[1],p=Object(n.useState)(""),f=Object(b.a)(p,2),y=f[0],x=f[1],S=Object(n.useState)(""),C=Object(b.a)(S,2),w=C[0],k=C[1],D=Object(n.useState)(""),M=Object(b.a)(D,2),T=M[0],Y=M[1],V=Object(n.useState)(!1),U=Object(b.a)(V,2),A=U[0],I=U[1],P=Object(n.useState)(""),B=Object(b.a)(P,2),L=B[0],Z=B[1],N=Object(n.useState)(R()(new Date)),G=Object(b.a)(N,2),W=G[0],K=G[1],H=Object(n.useState)(!1),q=Object(b.a)(H,2),J=q[0],Q=q[1],X=Object(n.useState)(!1),$=Object(b.a)(X,2),_=$[0],ee=$[1],te=Object(n.useState)(!1),ae=Object(b.a)(te,2),ne=ae[0],le=ae[1],re=Object(n.useState)(),ie=Object(b.a)(re,2),ce=ie[0],oe=ie[1],se=Object(n.useState)(),ue=Object(b.a)(se,2),pe=ue[0],fe=ue[1],be=e.admin,de=e.handleClose,ge=e.dataToEdit,Ee=e.setEditDialogVisible,ye=Object(n.useContext)(F).personalData,he=Object(n.useContext)(me).setSuccessSnackbarOpen,Oe=Object(n.useContext)(z).users;Object(n.useEffect)((function(){ge&&(i(ge.title),K(ge.rawDate),Y(ge.user),Z(ge.nextUser),I(ge.temporaryCommision),ge.timestamp?u(!1):u(!0),"string"===typeof ge.plus?""===ge.plus?k("Brak"):k(ge.plus):""===ge.minus?x("Brak"):x(ge.minus),ge.dluMinusStart&&x("DLU"))}),[ge]),Object(n.useEffect)((function(){Oe&&oe(Oe.map((function(e){return l.a.createElement(Se.a,{key:e.img,value:e.initials,control:l.a.createElement(ve.a,null),label:l.a.createElement(Ae,{label:e.initials,style:{backgroundColor:"".concat(e.color)}}),labelPlacement:"top"})})))}),[oe,Oe]),Object(n.useEffect)((function(){T&&fe(Oe.filter((function(e){return e.initials!==T})).map((function(e){return l.a.createElement(Se.a,{key:e.img,value:e.initials,control:l.a.createElement(ve.a,null),label:l.a.createElement(Ae,{label:e.initials,style:{backgroundColor:"".concat(e.color)}}),labelPlacement:"top"})})))}),[fe,Oe,T]);var Ye=function(e){return function(t){_&&ee(!1),e?(k(t.target.value),x("")):(x(t.target.value),k(""))}},Ve=function(e){return s?ne?R()(e).format("MMMM YYYY"):"":R()(e).format("MMMM YYYY")},ze=function(e){return"Brak"===e?"":""===e?null:e},Ue=function(e,t){return e?new Date(new Date(t).getTime()+12096e5).getTime():null},Be=function(){if(console.log(R()(W).isBefore(new Date,"month")),!r&&!y&&!w)return Q(!0),void ee(!0);if(r)if(y||w){if(!J&&!_){var e="".concat(ge?ge.id:Object(xe.a)());ge&&"DLU"===y?ge.timestamp!==Ve(W)?m.firestore().collection("company-state-general").doc(e).set({title:r,date:ge.date,minus:ge.minus,plus:ge.plus,user:"".concat(be?T:ye.initials),temporaryCommision:A,firstUser:"".concat(be?T:ye.initials),nextUser:L,commisionStartDate:ge.commisionStartDate,commisionChangeDate:Ue(A,W),rawDate:"".concat(W),timestamp:ge.timestamp,id:e,dluMinusStart:new Date(W).getTime()}).then((function(){return he(!0)})).catch((function(e){return console.log(e)})):m.firestore().collection("company-state-general").doc(e).set({title:r,date:"".concat(s?"":R()(W).format("L")),minus:ze(y),plus:ze(w),user:"".concat(be?T:ye.initials),oldCommision:s,temporaryCommision:A,firstUser:"".concat(be?T:ye.initials),nextUser:L,commisionStartDate:new Date(W).getTime(),commisionChangeDate:Ue(A,W),rawDate:"".concat(W),timestamp:Ve(W),id:e}).then((function(){return he(!0)})).catch((function(e){return console.log(e)})):m.firestore().collection("company-state-general").doc(e).set({title:r,date:R()(W).format("L"),minus:ze(y),plus:ze(w),user:"".concat(be?T:ye.initials),temporaryCommision:A,firstUser:"".concat(be?T:ye.initials),nextUser:L,commisionStartDate:new Date(W).getTime(),commisionChangeDate:Ue(A,W),rawDate:"".concat(W),timestamp:Ve(W),id:e}).then((function(){return he(!0)})).catch((function(e){return console.log(e)})),ge?Ee(!1):de()}}else ee(!0);else Q(!0)};return l.a.createElement(d.a,{style:{width:"500px",padding:"50px",backgroundColor:"#383838",color:"#fff"},elevation:3},l.a.createElement(g.a,{variant:"h6",gutterBottom:!0,style:{textAlign:"center"}},"Zarz\u0105dzanie klientami"),l.a.createElement(Pe,null),l.a.createElement(Fe,{style:{marginTop:"20px"}},l.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3},l.a.createElement(E.a,{item:!0},l.a.createElement(h.a,{variant:"outlined"},l.a.createElement(O.a,{htmlFor:"name",style:{color:"#fff"}},"Nazwa zlecenia"),l.a.createElement(j.a,{error:J,id:"name",label:"Nazwa zlecenia",variant:"outlined",style:{width:"240px"},required:!0,value:r,onChange:function(e){J&&Q(!1),i(e.target.value)}})),J?l.a.createElement(Ie,{variant:"caption",display:"block",gutterBottom:!0},"To pole nie mo\u017ce by\u0107 puste"):null),l.a.createElement(E.a,{item:!0},l.a.createElement(Me.a,{utils:je.a},l.a.createElement(Te.a,{disableToolbar:!0,variant:"inline",format:"L",margin:"normal",id:"date-picker-inline",label:"Start zlecenia",value:W,onChange:function(e){K(e)},style:{margin:"10px 0 20px"},KeyboardButtonProps:{"aria-label":"change date"}}))),be?l.a.createElement(l.a.Fragment,null,l.a.createElement(Pe,null),l.a.createElement(Se.a,{style:{margin:"20px 0"},control:l.a.createElement(Ce.a,{checked:s,onChange:function(e){u(e.target.checked)},name:"oldCommision",color:"primary"}),label:"Zlecenie istniej\u0105ce"})):null,l.a.createElement(Pe,null),l.a.createElement(E.a,{container:!0,justify:"center"},l.a.createElement(E.a,{item:!0,style:{textAlign:"center",margin:"20px 20px 20px 0"}},l.a.createElement(g.a,{variant:"subtitle2",gutterBottom:!0,style:{textAlign:"center"}},"Zlecenie pozyskane"),l.a.createElement(h.a,{variant:"outlined",style:{width:"100px"}},l.a.createElement(O.a,{id:"plus-reason"},l.a.createElement("em",null,"Pow\xf3d")),l.a.createElement(we.a,{error:_,labelId:"plus-reason",id:"plus",value:w,onChange:Ye("plus"),label:"Pow\xf3d"},l.a.createElement(ke.a,{value:"Brak"},"Brak"),l.a.createElement(ke.a,{value:"NZ"},"NZ"),l.a.createElement(ke.a,{value:"DLU"},"DLU")))),l.a.createElement(E.a,{item:!0,style:{textAlign:"center",margin:"20px 0 20px 20px"}},l.a.createElement(g.a,{variant:"subtitle2",gutterBottom:!0,style:{textAlign:"center"}},"Zlecenie utracone"),l.a.createElement(h.a,{variant:"outlined",style:{width:"100px"}},l.a.createElement(O.a,{id:"minus-reason"},l.a.createElement("em",null,"Pow\xf3d")),l.a.createElement(we.a,{error:_,labelId:"minus-reason",id:"minus",value:y,onChange:Ye(""),label:"MinusReason"},l.a.createElement(ke.a,{value:"Brak"},"Brak"),l.a.createElement(ke.a,{value:"K"},"K"),l.a.createElement(ke.a,{value:"TOD"},"TOD"),l.a.createElement(ke.a,{value:"DLU"},"DLU")))),_?l.a.createElement(E.a,{container:!0},l.a.createElement(Ie,{variant:"caption",style:{margin:"-15px 0 20px"}},"Wybierz rodzaj zlecenia")):null),l.a.createElement(Pe,null),be?l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{component:"fieldset",style:{margin:"20px 0"}},l.a.createElement(g.a,{variant:"subtitle2",gutterBottom:!0,style:{textAlign:"center"}},"Pozyskane przez"),l.a.createElement(De.a,{"aria-label":"user",name:"user1",value:T,onChange:function(e){Y(e.target.value)},style:{flexDirection:"row"}},ce)),T?l.a.createElement(Se.a,{style:{margin:"-10px 0 20px"},control:l.a.createElement(Ce.a,{checked:A,onChange:function(e){I(e.target.checked)},name:"temporaryCommision",color:"primary"}),label:"Po 14 dniach:"}):null,A?l.a.createElement(De.a,{"aria-label":"nextUser",name:"user2",value:L,onChange:function(e){Z(e.target.value)},style:{flexDirection:"row",margin:"0px 0 20px"}},pe):null,l.a.createElement(Pe,null)):null,ge?l.a.createElement(l.a.Fragment,null,ge.timestamp!==R()(new Date).format("MMMM YYYY")?l.a.createElement(Se.a,{style:{margin:"20px 0"},control:l.a.createElement(Ce.a,{checked:ne,onChange:function(e){le(e.target.checked)},name:"currentMonth",color:"primary"}),label:"Doda\u0107 do bie\u017c\u0105cego miesi\u0105ca?"}):null):null,ge?l.a.createElement(E.a,{container:!0,justify:"space-between"},l.a.createElement(v.a,{style:{margin:"20px 0"},variant:"outlined",color:"primary",onClick:function(){return Ee(!1)}},"Anuluj"),l.a.createElement(v.a,{style:{margin:"20px 0"},variant:"contained",color:"primary",onClick:Be},"Zapisz")):l.a.createElement(v.a,{style:{margin:"20px 0"},variant:"contained",color:"primary",onClick:Be},"Zatwierd\u017a"))))};function Le(){var e=Object(P.a)(["\n  & .MuiPaper-root {\n    background-color: #383838;\n  }\n"]);return Le=function(){return e},e}var Ze=Object(B.a)(fe.a)(Le()),Ne=function(e){var t=e.editDialogVisible,a=e.dataToEdit,n=e.setEditDialogVisible;return l.a.createElement(Ze,{open:t,onClose:function(){return n(!1)}},l.a.createElement(Be,{admin:"admin",dataToEdit:a,setEditDialogVisible:n}))},Ge=a(55),We=a.n(Ge),Ke=function(e){var t=e.checkSize,a=e.companyState,r=e.company,i=e.dataForUnactiveClients,c=e.users,o=e.findChipColor,s=e.admin,u=e.handleOpenEditDialog,m=e.handleOpenDeleteDialog,p=Object(n.useState)(),f=Object(b.a)(p,2),y=f[0],h=f[1];return Object(n.useEffect)((function(){if(i){var e=i.sort((function(e,t){return e.title<t.title?-1:e.title>t.title?1:0})).map((function(e,t){return l.a.createElement(q.a,{key:t},l.a.createElement(J.a,null,l.a.createElement(N.a,null,l.a.createElement(We.a,null))),l.a.createElement(Q.a,{primary:e.title,secondary:e.date,style:{flex:"none",width:"28%",marginRight:"10px",overflow:"hidden"}}),l.a.createElement(X.a,{component:"span",style:{width:"13%",textAlign:"center"}},l.a.createElement(_.a,{label:e.minus,style:{backgroundColor:"#ff9292"}})),l.a.createElement(X.a,{component:"span",style:{width:"14%",textAlign:"center"}},e.user?l.a.createElement(l.a.Fragment,null,c.filter((function(t){return t.initials===e.user}))[0].img?l.a.createElement($.a,{badgeContent:e.user,color:"primary"},l.a.createElement(N.a,{style:{margin:"0 auto"},src:c.filter((function(t){return t.initials===e.user}))[0].img})):l.a.createElement(_.a,{label:e.user,style:{backgroundColor:"".concat(o(e.user))}})):null),l.a.createElement(X.a,{component:"span",style:{width:"14%",textAlign:"center"}},e.timestamp?null:l.a.createElement(_.a,{label:"OLD",style:{backgroundColor:"#252c61",color:"white"}})),s?l.a.createElement(ee.a,null,l.a.createElement(S.a,{edge:"end","aria-label":"create",onClick:u(e)},l.a.createElement(ue.a,null)),l.a.createElement(S.a,{edge:"end","aria-label":"delete",onClick:m(e)},l.a.createElement(oe.a,null))):null)}));h(e)}}),[i]),l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{item:!0,xs:11,lg:t(),xl:a?5:11,style:{margin:"10px 5px"}},l.a.createElement(d.a,{elevation:3,style:{padding:"20px 0",backgroundColor:"#a9a9a9"}},l.a.createElement(g.a,{variant:"h6",style:{padding:"10px 20px"}},"Niefakturowani klienci",y?l.a.createElement(_.a,{label:y.length,style:{marginLeft:"10px"}}):null),l.a.createElement(te.a,{light:!0}),l.a.createElement(ae.a,{style:{maxHeight:"".concat(r?"575px":"260px"),overflowY:"auto"}},y))))},He=function(e){var t=Object(n.useContext)(F).personalData,a=Object(n.useContext)(z).users,r=Object(n.useContext)(me),i=r.personalStateVisible,c=r.companyMonthlyStateVisible,s=r.companyGeneralStateVisible,u=r.setSuccessDeleteSnackbarOpen,p=Object(n.useState)(!1),f=Object(b.a)(p,2),h=f[0],O=f[1],j=Object(n.useState)(78),x=Object(b.a)(j,1)[0],v=Object(n.useState)(!1),C=Object(b.a)(v,2),w=C[0],k=C[1],D=Object(n.useState)(),M=Object(b.a)(D,2),T=M[0],Y=M[1],V=Object(n.useState)(null),U=Object(b.a)(V,2),A=U[0],I=U[1],P=Object(n.useState)(null),B=Object(b.a)(P,2),L=B[0],Z=B[1],G=Object(n.useState)(),W=Object(b.a)(G,2),K=W[0],H=W[1],ne=Object(n.useState)(),re=Object(b.a)(ne,2),ce=re[0],se=re[1],pe=Object(n.useState)(),fe=Object(b.a)(pe,2),be=fe[0],de=fe[1],ge=Object(n.useState)(),Ee=Object(b.a)(ge,2),ye=Ee[0],he=Ee[1],je=Object(n.useState)(!1),xe=Object(b.a)(je,2),Se=xe[0],ve=xe[1],Ce=Object(n.useState)(),we=Object(b.a)(Ce,2),ke=we[0],De=we[1],Me=e.data,Te=e.admin,Ye=e.title,Ve=e.company,ze=e.subtitle,Ue=e.dataForUnactiveClients,Fe=e.currentTimestamp,Ae=function(e){return function(t){k(!0),Y(e)}},Ie=function(e){return function(t){O(!0),De(e)}},Pe=function(e){return t?a.filter((function(t){return t.initials===e}))[0].color:void 0},Be=function(){return Se?"true"===i||"true"===c?11:5:"true"===s?11:5},Le=function(e,t){var a=(e.commisionChangeDate-(new Date).getTime())/1e3/60/60/24;return e.temporaryCommision&&e.commisionStartDate<=(new Date).getTime()?e.commisionChangeDate-(new Date).getTime()<=0?t?null:"".concat(e.nextUser," 0"):"".concat(e.nextUser," ").concat(a.toFixed()):"".concat(e.nextUser)},Ze=function(e,t){return t?e.commisionChangeDate<=(new Date).getTime()?e.nextUser:e.firstUser:e.user},Ge=function(e,t,a){return t?e.commisionChangeDate<=(new Date).getTime()?a.filter((function(t){return t.initials===e.nextUser}))[0].img:a.filter((function(t){return t.initials===e.firstUser}))[0].img:a.filter((function(t){return t.initials===e.user}))[0].img},We=function(e){return e.dluMinusStart?"DLU":null};Object(n.useEffect)((function(){Ve&&ve(!0)}),[Ve]),Object(n.useEffect)((function(){Me&&(se(Me.filter((function(e){return""===e.plus||e.plus?e:null})).filter((function(e){return!R()(e.commisionStartDate).isAfter("".concat(R()("".concat(Fe),"MMMM YYYY")),"month")})).sort((function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}))),H(Me.filter((function(e){return""===e.minus||e.minus?e:null})).filter((function(e){return!R()(e.commisionStartDate).isAfter("".concat(R()("".concat(Fe),"MMMM YYYY")),"month")})).sort((function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}))))}),[Me,Fe]),Object(n.useEffect)((function(){if(ce&&K){var e=ce.length-K.length;I(e>0?"+".concat(e):"".concat(e))}}),[ce,K]),Object(n.useEffect)((function(){if(ce){var e=ce.map((function(e,t){return l.a.createElement(q.a,{key:t},l.a.createElement(J.a,null,l.a.createElement(N.a,null,l.a.createElement(le.a,null))),l.a.createElement(Q.a,{primary:e.title,secondary:e.date,style:{flex:"none",width:"28%",marginRight:"10px",overflow:"hidden"}}),l.a.createElement(X.a,{component:"span",style:{width:"13%",textAlign:"center"}},e.plus?l.a.createElement($.a,{badgeContent:We(e),color:"secondary"},l.a.createElement(_.a,{label:e.plus,style:{backgroundColor:"#a2ef9d"}})):null),l.a.createElement(X.a,{component:"span",style:{width:"14%",textAlign:"center"}},e.user?l.a.createElement(l.a.Fragment,null,a.filter((function(t){return t.initials===e.user}))[0].img?l.a.createElement(l.a.Fragment,null,e.temporaryCommision?l.a.createElement($.a,{badgeContent:Le(e,Ve),color:"secondary",anchorOrigin:{vertical:"top",horizontal:"left"}},l.a.createElement($.a,{badgeContent:Ze(e,Ve),color:"primary"},l.a.createElement(N.a,{style:{margin:"0 auto"},src:Ge(e,Ve,a)}))):l.a.createElement($.a,{badgeContent:e.user,color:"primary"},l.a.createElement(N.a,{style:{margin:"0 auto"},src:a.filter((function(t){return t.initials===e.user}))[0].img}))):l.a.createElement(_.a,{label:e.user,style:{backgroundColor:"".concat(Pe(e.user))}})):null),l.a.createElement(X.a,{component:"span",style:{width:"14%",textAlign:"center"}},e.timestamp?null:l.a.createElement(_.a,{label:"OLD",style:{backgroundColor:"#252c61",color:"white"}})),Ve?l.a.createElement(l.a.Fragment,null,Te?l.a.createElement(ee.a,null,l.a.createElement(S.a,{edge:"end","aria-label":"create",onClick:Ae(e)},l.a.createElement(ue.a,null)),l.a.createElement(S.a,{edge:"end","aria-label":"delete",onClick:Ie(e)},l.a.createElement(oe.a,null))):null):null)}));de(e)}}),[de,ce]),Object(n.useEffect)((function(){if(K){var e=K.map((function(e,t){return l.a.createElement(q.a,{key:t},l.a.createElement(J.a,null,l.a.createElement(N.a,null,l.a.createElement(ie.a,null))),l.a.createElement(Q.a,{primary:e.title,secondary:e.date,style:{flex:"none",width:"28%",marginRight:"10px",overflow:"hidden"}}),l.a.createElement(X.a,{component:"span",style:{width:"18%",textAlign:"center"}},e.minus?l.a.createElement(_.a,{label:e.minus,style:{backgroundColor:"#ff9292"}}):null),l.a.createElement(X.a,{component:"span",style:{width:"12%",textAlign:"center"}},e.user?l.a.createElement(l.a.Fragment,null,a.filter((function(t){return t.initials===e.user}))[0].img?l.a.createElement($.a,{badgeContent:e.user,color:"primary"},l.a.createElement(N.a,{style:{margin:"0 auto"},src:a.filter((function(t){return t.initials===e.user}))[0].img})):l.a.createElement(_.a,{label:e.user,style:{backgroundColor:"".concat(Pe(e.user))}})):null),l.a.createElement(X.a,{component:"span",style:{width:"18%",textAlign:"center"}},e.timestamp?null:l.a.createElement(_.a,{label:"OLD",style:{backgroundColor:"#252c61",color:"white"}})),l.a.createElement(l.a.Fragment,null,Te?l.a.createElement(ee.a,null,l.a.createElement(S.a,{edge:"end","aria-label":"create",onClick:Ae(e)},l.a.createElement(ue.a,null)),l.a.createElement(S.a,{edge:"end","aria-label":"delete",onClick:Ie(e)},l.a.createElement(oe.a,null))):null))}));he(e)}}),[he,K]),Object(n.useEffect)((function(){ce&&Z(ce.length/x*100)}),[ce,x]);var He=function(e){return l.a.createElement(X.a,{position:"relative",display:"inline-flex",style:{margin:"16px auto",left:"50%",transform:"translatex(-50%)"}},l.a.createElement(y.a,{style:{position:"relative",color:"#cccccc"},variant:"static",value:100,size:80}),l.a.createElement(y.a,Object.assign({style:{position:"absolute"},variant:"static"},e)),l.a.createElement(X.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},l.a.createElement(g.a,{variant:"caption",component:"div",color:"textSecondary"},"".concat(Math.round(e.value),"%"))))};return l.a.createElement(l.a.Fragment,null,a?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{container:!0,item:!0,xl:5,style:{maxWidth:"1400px",margin:"0 auto"}},l.a.createElement(E.a,{container:!0,justify:"center",direction:"column"},l.a.createElement(g.a,{variant:"".concat(Se?"h4":"h5"),style:{position:"relative",textAlign:"center",margin:"0 auto",marginTop:"20px",color:"white",fontWeight:"bold"}},Ye,Se?null:l.a.createElement(l.a.Fragment,null,A?l.a.createElement(_.a,{style:{position:"absolute",left:"105%",padding:"0 5px",backgroundColor:"".concat(A>=0?"#d5ffde":"#ffcbcb")},label:A}):null)),l.a.createElement(g.a,{variant:"subtitle1",style:{textAlign:"center",margin:"0 auto",marginTop:"20px",color:"white"}},ze)),l.a.createElement(E.a,{container:!0,justify:"center",style:{margin:"20px auto"}},Se?l.a.createElement(E.a,{container:!0,justify:"center"},Te?l.a.createElement(E.a,{item:!0,xs:3,lg:5,xl:3,style:{margin:"10px 5px"}},l.a.createElement(d.a,{elevation:3,style:{padding:"20px",backgroundColor:"#d5f5ff"}},l.a.createElement(g.a,{variant:"h6",style:{position:"relative",paddingBottom:"10px"}},"Stan ca\u0142kowity"," ",ce?l.a.createElement(_.a,{style:{position:"absolute",right:0},label:"".concat(ce.length," / ").concat(x)}):null),l.a.createElement(te.a,{light:!0}),l.a.createElement(He,{size:80,value:L}),ce?l.a.createElement(g.a,{style:{textAlign:"center"}},(11540*ce.length).toLocaleString(),"z\u0142 /"," ",l.a.createElement("span",{style:{fontWeight:"bold"}},(11540*x).toLocaleString(),"z\u0142")):null)):null):null,l.a.createElement(E.a,{item:!0,xs:11,lg:Be(),xl:Se?6:11,style:{margin:"10px 5px"}},l.a.createElement(d.a,{elevation:3,style:{padding:"20px 0",backgroundColor:"".concat(Ve?"#d5f5ff":"#d5ffde")}},l.a.createElement(g.a,{variant:"h6",style:{padding:"10px 20px"}},Ve?"Obs\u0142ugiwani klienci":"Zlecenia pozyskane",ce?l.a.createElement(_.a,{label:ce.length,style:{marginLeft:"10px"}}):null),l.a.createElement(te.a,{light:!0}),l.a.createElement(ae.a,{style:{maxHeight:"".concat(Ve?"575px":"260px"),overflowY:"auto"}},be))),Ve?l.a.createElement(Ke,{checkSize:Be,companyState:Se,company:Ve,dataForUnactiveClients:Ue,users:a,findChipColor:Pe,admin:Te,handleOpenDeleteDialog:Ie,handleOpenEditDialog:Ae}):l.a.createElement(E.a,{item:!0,xs:11,lg:Be(),xl:Se?5:11,style:{margin:"10px 5px"}},l.a.createElement(d.a,{elevation:3,style:{padding:"20px 0",backgroundColor:"#ffcbcb"}},l.a.createElement(g.a,{variant:"h6",style:{padding:"10px 20px"}},"Zlecenia utracone",K?l.a.createElement(_.a,{label:K.length,style:{marginLeft:"10px"}}):null),l.a.createElement(te.a,{light:!0}),l.a.createElement(ae.a,{style:{maxHeight:"".concat(Ve?"575px":"260px"),overflowY:"auto"}},ye))))),l.a.createElement(Oe,{deleteConfirmationDialogVisible:h,setDeleteConfirmationDialogVisible:O,handleDeleteData:function(e){return function(t){e.timestamp&&m.firestore().collection("personal-state-".concat(a.filter((function(t){return t.initials===e.user}))[0].uid)).doc(e.id).delete().then((function(){O(!1),u(!0)})),m.firestore().collection("company-state-general").doc(e.id).delete().then((function(){O(!1),u(!0)}))}},itemToDelete:ke}),l.a.createElement(Ne,{editDialogVisible:w,dataToEdit:T,setEditDialogVisible:k})):l.a.createElement(o.a,{to:"/"}))},Re=function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),r=a[0],i=a[1],c=Object(n.useContext)(F).personalData,o=e.currentTimestamp,s=e.data;return Object(n.useEffect)((function(){c&&i(c.admin)}),[c]),l.a.createElement(E.a,{container:!0,style:{margin:"0 auto"}},l.a.createElement(d.a,{elevation:3,style:{height:"fit-content",backgroundColor:"#797979",width:"100%",margin:"20px"}},l.a.createElement(He,{title:"Stan indywidualny",subtitle:"Dane na ".concat(o),data:s,admin:r,currentTimestamp:o})))},qe=function(e){var t=e.dataForUnactiveClients,a=e.currentTimestamp,r=Object(n.useState)(""),i=Object(b.a)(r,2),c=i[0],o=i[1],s=Object(n.useContext)(Y).companyState,u=Object(n.useContext)(F).personalData,m=Object(n.useContext)(me),p=m.personalStateVisible,f=m.companyMonthlyStateVisible;Object(n.useEffect)((function(){u&&o(u.admin)}),[u]);return l.a.createElement(E.a,{container:!0,item:!0,lg:"true"===p||"true"===f?7:11,style:{margin:"0 auto"}},l.a.createElement(d.a,{elevation:3,style:{height:"fit-content",backgroundColor:"#4f6984",width:"100%",margin:"20px auto"}},l.a.createElement(He,{title:"Stan firmowy og\xf3lny",data:s,dataForUnactiveClients:t,admin:c,company:"true",currentTimestamp:a})))},Je=a(213),Qe=a(4),Xe=a(219),$e=a(203),_e=a(111),et=a.n(_e),tt=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),c=Object(b.a)(i,2),o=c[0],s=c[1],u=Object(n.useContext)(F).personalData,m=Object(Qe.a)((function(e){return{tooltip:{backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"0px 0px 10px 2px rgba(63, 81, 181, 0.6)"}}}))(Xe.a);Object(n.useEffect)((function(){u&&s(u.admin)}),[u]);var p=function(){r(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(m,{title:l.a.createElement(g.a,{style:{fontSize:"12px"}},"Dodaj zlecenie"),"aria-label":"add",onClick:function(){r(!0)},placement:"left"},l.a.createElement($e.a,{color:"primary"},l.a.createElement(et.a,null))),l.a.createElement(fe.a,{onClose:p,"aria-labelledby":"simple-dialog-title",open:a},l.a.createElement(Be,{admin:o,handleClose:p})))},at=a(112),nt=a.n(at),lt=Object(Qe.a)((function(e){return{tooltip:{backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"0px 0px 10px 2px rgba(63, 81, 181, 0.6)"}}}))(Xe.a),rt=function(){return l.a.createElement(lt,{title:l.a.createElement(g.a,{style:{fontSize:"12px"}},"Um\xf3w spotkanie"),"aria-label":"add",style:{margin:"20px 0"},placement:"left"},l.a.createElement($e.a,{color:"primary"},l.a.createElement(nt.a,null)))},it=a(113),ct=a.n(it),ot=function(){var e=Object(Qe.a)((function(e){return{tooltip:{backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"0px 0px 10px 2px rgba(63, 81, 181, 0.6)"}}}))(Xe.a);return l.a.createElement(e,{title:l.a.createElement(g.a,{style:{fontSize:"12px"}},"Zg\u0142o\u015b problem"),"aria-label":"add",placement:"left"},l.a.createElement($e.a,{color:"primary"},l.a.createElement(ct.a,null)))};function st(){var e=Object(P.a)(["\n  background-color: #5f5f5f !important;\n  width: 100%;\n"]);return st=function(){return e},e}function ut(){var e=Object(P.a)(["\n  & * {\n    color: white !important;\n  }\n"]);return ut=function(){return e},e}var mt=B.a.form(ut()),pt=Object(B.a)(te.a)(st()),ft=function(e){var t=e.setCurrentTimestamp,a=e.handleClose,r=Object(n.useState)(R()(new Date)),i=Object(b.a)(r,2),c=i[0],o=i[1];return l.a.createElement(d.a,{style:{width:"500px",padding:"50px",backgroundColor:"#383838",color:"#fff"},elevation:3},l.a.createElement(g.a,{variant:"h6",gutterBottom:!0,style:{textAlign:"center"}},"Sprawd\u017a stan w innych miesi\u0105cach"),l.a.createElement(pt,null),l.a.createElement(mt,{style:{marginTop:"20px"}},l.a.createElement(E.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3},l.a.createElement(E.a,{item:!0},l.a.createElement(Me.a,{utils:je.a},l.a.createElement(Te.a,{disableToolbar:!0,variant:"inline",format:"MMMM YYYY",margin:"normal",id:"date-picker-inline",label:"Stan na",value:c,onChange:function(e){o(e)},style:{margin:"10px 0 20px"},KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement(v.a,{style:{margin:"20px 0"},variant:"contained",color:"primary",onClick:function(){t(c.format("MMMM YYYY")),a()}},"Zatwierd\u017a"))))},bt=a(114),dt=a.n(bt),gt=function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),r=a[0],i=a[1],c=e.setCurrentTimestamp,o=e.currentTimestamp,s=Object(Qe.a)((function(e){return{tooltip:{backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"0px 0px 10px 2px rgba(63, 81, 181, 0.6)"}}}))(Xe.a),u=function(){i(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(s,{title:l.a.createElement(g.a,{style:{fontSize:"12px"}},"Sprawd\u017a stan"),"aria-label":"add",onClick:function(){i(!0)},placement:"left",style:{margin:"20px 0"}},l.a.createElement($e.a,{color:"primary"},l.a.createElement(dt.a,null))),l.a.createElement(fe.a,{onClose:u,"aria-labelledby":"simple-dialog-title",open:r},l.a.createElement(ft,{handleClose:u,setCurrentTimestamp:c,currentTimestamp:o})))},Et=function(e){var t=e.setCurrentTimestamp,a=e.currentTimestamp;return l.a.createElement(X.a,{component:"div",style:{position:"fixed",bottom:"60px",right:"40px",display:"flex",flexDirection:"column"}},l.a.createElement(tt,null),l.a.createElement(rt,null),l.a.createElement(ot,null),l.a.createElement(gt,{setCurrentTimestamp:t,currentTimestamp:a}))},yt=a(67),ht=a.n(yt),Ot=function(e){var t=Object(n.useContext)(F).personalData,a=e.currentTimestamp,r=e.data,i=Object(n.useState)(),c=Object(b.a)(i,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){t&&s(t.admin)}),[t]),l.a.createElement(E.a,{container:!0,style:{margin:"0 auto"}},l.a.createElement(d.a,{elevation:3,style:{height:"fit-content",backgroundColor:"#b17b5b",width:"100%",margin:"20px "}},l.a.createElement(He,{title:"Stan firmowy miesi\u0119czny",subtitle:"Dane na ".concat(a),data:r,admin:o,currentTimestamp:a})))},jt=function(e){var t=e.initials,a=e.currentTimestamp,r=e.name,i=Object(n.useContext)(Y).companyState,c=Object(n.useState)(),o=Object(b.a)(c,2),s=o[0],u=o[1];return Object(n.useEffect)((function(){if(i){var e=i.filter((function(e){return e.timestamp===a})).filter((function(e){return e.user===t}));u(e)}}),[i,t,a]),l.a.createElement(E.a,{container:!0,style:{margin:"0 auto"}},l.a.createElement(d.a,{elevation:3,style:{height:"fit-content",backgroundColor:"#797979",width:"100%",margin:"20px"}},l.a.createElement(He,{title:"Stan indywidualny dla ".concat(r," "),subtitle:"Dane na ".concat(a),data:s,admin:"false",currentTimestamp:a})))},xt=function(e){return l.a.createElement(C.a,Object.assign({elevation:6,variant:"filled"},e))},St=function(){var e=Object(n.useContext)(me),t=e.setSuccessDeleteSnackbarOpen,a=e.successDeleteSnackbarOpen,r=e.successSnackbarOpen,i=e.setSuccessSnackbarOpen,c=e.changeCompanyGeneralStateVisible,o=e.changePersonalStateVisible,s=e.personalStateVisible,u=e.companyGeneralStateVisible,p=e.companyMonthlyStateVisible,f=e.changeCompanyMonthlyStateVisible,d=e.usersStateVisible,g=e.changeUsersStateVisible,y=Object(n.useState)(),h=Object(b.a)(y,2),O=h[0],j=h[1],x=Object(n.useState)(),S=Object(b.a)(x,2),v=S[0],C=S[1],w=Object(n.useState)(),k=Object(b.a)(w,2),D=k[0],M=k[1],T=Object(n.useState)(),V=Object(b.a)(T,2),U=V[0],A=V[1],I=Object(n.useContext)(Y).companyState,P=Object(n.useContext)(F).personalData,B=Object(n.useContext)(z).users;Object(n.useEffect)((function(){j(R()(new Date).format("MMMM YYYY"))}),[]),Object(n.useEffect)((function(){I&&I.filter((function(e){return e.dluMinusStart})).forEach((function(e){var t=R()(e.dluMinusStart).format("YYYY-MM-DD"),a=R()(O,"MMMM YYYY").format("YYYY-MM-DD");if(console.log(t,a),R()(t).isAfter(a,"month")){if(!e.minus)return;console.log("1"),console.log(e),m.firestore().collection("company-state-general").doc(e.id).set(e.originalData).catch((function(e){return console.log(e)}))}else if(!R()(t).isAfter(a,"month")){if(console.log("2"),e.minus)return;m.firestore().collection("company-state-general").doc(e.id).set({title:e.title,date:R()(e.dluMinusStart).format("L"),minus:"DLU",plus:null,user:e.user,temporaryCommision:e.temporaryCommision,firstUser:e.firstUser,nextUser:e.nextUser,commisionStartDate:e.dluMinusStart,commisionChangeDate:e.commisionChangeDate,rawDate:e.rawDate,timestamp:R()(e.dluMinusStart).format("MMMM YYYY"),id:e.id,dluMinusStart:e.dluMinusStart,originalData:e}).catch((function(e){return console.log(e)}))}}))}),[O,I]),Object(n.useEffect)((function(){I&&P&&(C(I.filter((function(e){return e.timestamp===O}))),A(I.filter((function(e){return e.minus})).filter((function(e){return"DLU"===e.minus}))),P.admin?M(I.filter((function(e){return e.timestamp===O})).filter((function(e){return"Q"===e.user}))):M(I.filter((function(e){return e.timestamp===O})).filter((function(e){return e.user===P.initials}))))}),[C,I,O,P]);var L=function(e,a){"clickaway"!==a&&(i(!1),t(!1))},Z=function(e,t){return function(){"personal"===e?o("true"===s?"false":"true"):"company-general"===e?c("true"===u?"false":"true"):"users"===e?"true"===d[t]?g("false",t):g("true",t):f("true"===p?"false":"true")}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{container:!0,item:!0,justify:"space-around",xs:11},l.a.createElement(E.a,{container:!0,style:{margin:"20px 40px"}},l.a.createElement(_.a,{avatar:l.a.createElement(N.a,null,"true"===s?l.a.createElement(ht.a,null):l.a.createElement(We.a,null)),label:"Stan indywidualny",clickable:!0,color:"primary",onClick:Z("personal"),style:{opacity:"".concat("true"===s?1:.6),margin:"10px"}}),l.a.createElement(_.a,{avatar:l.a.createElement(N.a,null,"true"===p?l.a.createElement(ht.a,null):l.a.createElement(We.a,null)),label:"Stan firmowy miesi\u0119czny",clickable:!0,color:"primary",onClick:Z("company-monthly"),style:{opacity:"".concat("true"===p?1:.6),margin:"10px"}}),l.a.createElement(_.a,{avatar:l.a.createElement(N.a,null,"true"===u?l.a.createElement(ht.a,null):l.a.createElement(We.a,null)),label:"Stan firmowy og\xf3lny",clickable:!0,color:"primary",onClick:Z("company-general"),style:{opacity:"".concat("true"===u?1:.6),margin:"10px"}}),B?l.a.createElement(l.a.Fragment,null,B.map((function(e){return e.initials===P.initials?null:l.a.createElement(_.a,{avatar:l.a.createElement(N.a,null,"true"===d[e.initials]?l.a.createElement(ht.a,null):l.a.createElement(We.a,null)),label:"".concat(e.initials),clickable:!0,onClick:Z("users","".concat(e.initials)),style:{opacity:"".concat("true"===d[e.initials]?1:.6),margin:"10px",backgroundColor:"".concat(e.color)}})}))):null),l.a.createElement(E.a,{container:!0,item:!0,direction:"column",lg:"true"===u?5:10,style:{height:"fit-content"}},"true"===p?l.a.createElement(Ot,{currentTimestamp:O,data:v}):null,"true"===s?l.a.createElement(Re,{currentTimestamp:O,data:D}):null),"true"===u?l.a.createElement(qe,{dataForUnactiveClients:U,currentTimestamp:O}):null,B?l.a.createElement(l.a.Fragment,null,B.map((function(e){return e.initials===P.initials?null:l.a.createElement(l.a.Fragment,null,"true"===d[e.initials]?l.a.createElement(jt,{key:e.initials,initials:e.initials,name:e.name,currentTimestamp:O}):null)}))):null),l.a.createElement(Et,{setCurrentTimestamp:j,currentTimestamp:O}),l.a.createElement(Je.a,{open:r,autoHideDuration:6e3,onClose:L,anchorOrigin:{vertical:"bottom",horizontal:"left"}},l.a.createElement(xt,{onClose:L,severity:"success"},"Pomy\u015blnie dodano zlecenie!")),l.a.createElement(Je.a,{open:a,autoHideDuration:6e3,onClose:L,anchorOrigin:{vertical:"bottom",horizontal:"left"}},l.a.createElement(xt,{onClose:L,severity:"success"},"Pomy\u015blnie usuni\u0119to zlecenie!")))},vt=function(){return l.a.createElement(U,null,l.a.createElement(A,null,l.a.createElement(V,null,l.a.createElement(pe,null,l.a.createElement(c.a,{basename:"/"},l.a.createElement(K,null),l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/",exact:!0,component:I}),l.a.createElement(o.b,{path:"/dashboard",component:St})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.Fragment,null,l.a.createElement(vt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[137,1,2]]]);
//# sourceMappingURL=main.2c29dfc6.chunk.js.map